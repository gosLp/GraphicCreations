---
interface Frontmatter {
  title: string;
  image: string;
  description: string;
}

interface PortfolioItem {
  frontmatter: Frontmatter;
  url: string;
}

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import PortfolioCard from '../components/PortfolioCard.astro';
import Footer from '../components/Footer.astro';
import { getCollection, type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';


// Astro.glob() is type-safe and loads all content at build time// Get all portfolio entries, sorted by date
const portfolioEntries = await getCollection('portfolio');

// Sort by date
const sortedEntries = portfolioEntries.sort((a, b) => {
  return new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime();
});
---

<Layout title="Home">
	<Header />
	<main>
		<section class="Hero">
			<h1> Creative Design Solutions</h1>
			<p>Sepcialising in Menus, calenders and magazine design</p>
		</section>

		<section class="portfolio">
			<h2>Portfolio</h2>
			<div class="portfolio-grid">
				{sortedEntries.map((entry) => (
				  <PortfolioCard
					key={entry.slug} 
					title={entry.data.title}
					description={entry.data.description}
					image={entry.data.mainImage}
				  />
				))}
			  </div>
			  
		</section>
	</main>
	<Footer />
	<style>
		.hero {
		  padding: 4rem 2rem;
		  text-align: center;
		  background: #f5f5f5;
		}
		
		.portfolio-grid {
		  display: grid;
		  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		  gap: 2rem;
		  padding: 2rem;
		}
	  </style>
	<!-- <Welcome /> -->
</Layout>
